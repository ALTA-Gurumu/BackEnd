openapi: 3.0.0
info:
  version: 1.0.0
  title: GuruMu API
  description: Design API for GuruMu APP by Group 4
servers:
  # Added by API Auto Mocking Plugin
  - description: SwaggerHub API Auto Mocking
    url: https://virtserver.swaggerhub.com/CapstoneAltaBE14/GuruMu/1.0.0
  - description: Gurumu service API
    url: https://devmyproject.site
tags:
  - name: Autentifikasi
  - name: Guru
  - name: Murid
  - name: Reservasi
  
paths:
  /login:
    post:
      tags:
        - Authentication
      summary: untuk login ke akun
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                email:
                  type: string
                  example: johndoe@gmail.com
                password:
                  type: string
                  example: pass12345
      responses: 
        '200':
          description: login sukses
          content:
            application.json:
              schema:
                type: object
                properties:
                  data:
                    type: object
                    properties:
                          nama:
                            type: string
                          email:
                            type: string 
                          token:
                            type: string
                  message:
                    type: string
                example:
                  data:
                    nama: Namaku
                    email: Emailku@gmail.com
                    token: 12344567890qwertyuiop
                  message: login sukses
                      
        '400':
          $ref: '#/components/responses/Response400'
        '500':
          $ref: '#/components/responses/Response500'
  /guru:
    post:
      tags:
      - Guru
      summary: untuk daftar sebagai guru
      description: untuk daftar sebagai guru
      requestBody:
          content:
              application/json:
                  schema:
                      type: object
                      properties:
                          username:
                              type: string
                          nama:
                              type: string
                          email:
                              type: string
                              format: email
                          password:
                              type: string
                  example:
                      username: budidi
                      nama: budi didi
                      email: budi@yahoo.com
                      password: "budi123"
      responses:
          201:
              description: "berhasil"
              content:
                  application/json:
                      schema:
                          type: object
                          properties:
                              data:
                                  type: object
                                  properties:
                                      username:
                                          type: string
                                      email:
                                          type: string
                                          format: email
                              message:
                                  type: string
                      example:
                          data:
                              username: budi didi
                              email: budi@yahoo.com
                          message: "berhasil menambahkan data"
          400:
              $ref: "#/components/responses/Response400"
          500:
              $ref: "#/components/responses/Response500"
    put:
      tags:
        - Guru
      summary: untuk update profil guru
      description: untuk update profil guru
      security:
        - jwt_auth: []
      requestBody:
        content:
          multipart/form-data:
              schema:
                  type: object
                  properties:
                      nama:
                        type: string
                      email:
                        type: string
                      alamat:
                        type: string
                      telefon:
                        type: integer
                      deskripsi:
                        type: integer
                      ijazah:
                        type: string
                      pelajaran:
                        type: string
                      avatar:
                        type: string
      responses:
        '200':
          description: sukses mengganti profil guru
          content:
            application/json:
              schema:
                type: object
              example:
                message: sukses mengganti profil guru
        '400':
          $ref: '#/components/responses/Response400'
        '500':
          $ref: '#/components/responses/Response500'
    delete:
      tags:
        - Guru
      summary: untuk hapus profil guru
      security:
        - jwt_auth: []
      responses:
        '200':
          description: sukses menghapus profil guru
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: sukses menghapus profil guru
        '400':
          $ref: '#/components/responses/Response400'
        '500':
          $ref: '#/components/responses/Response500'
    get:
        tags:
            - Guru
        summary: untuk menampilkan profil guru di beranda
        description: untuk menampilkan semua profil guru di beranda
        responses:
          '200':
            description: sukses menampilkan semua profil guru
            content:
              application/json:
                schema:
                  type: object
                  properties:
                    data:
                      type: array
                      items:
                          type: object
                          properties:
                            guru_id:
                              type: integer
                            nama:
                              type: string
                            alamat:
                              type: string
                            penilaian:
                              type: number
                            judul:
                              type: string
                            pelajaran:
                              type: string
                            avatar:
                              type: string 
                example:
                    data:
                      - guru_id: 2
                        nama: Anika
                        alamat: jl. harupat
                        penilaian: 4.8
                        judul: Hi, the name is Bond. Anika Bond. I teach English for everyone
                        pelajaran: Bahasa Inggris
                        avatar: anicantik.jpg
                      - guru_id: 2
                        nama: Greta
                        alamat: jl. gagak
                        penilaian: 4.4
                        judul: I teach math for everyone
                        pelajaran: Matematika
                        avatar: greta.jpg
                    message:
                      example: sukses menampilkan semua profil guru
          '400':
            $ref: '#/components/responses/Response400'
          '500':
            $ref: '#/components/responses/Response500'
  /guru/sesiku:
    get:
      tags:
        - Guru
      summary: untuk menampilkan semua riwayat sesi guru
      description: untuk menampilkan semua riwayat sesi guru
      security:
        - jwt_auth: []
      responses:
        '200':
          description: sukses menampilkan semua sesi guru
          content:
            application/json:
              schema:
                type: object
                properties:
                  data:
                    type: array
                    items:
                      type: object
                      properties:
                        sesi_id:
                          type: integer
                        nama_murid:
                          type: string
                        pelajaran:
                          type: string
                        tanggal:
                          type: string
                        avatar_murid:
                          type: string 
              example:
                  data:
                    - sesi_id: 1
                      nama_murid: Ani
                      pelajaran: Bahasa Inggris
                      tanggal: 12-01-2023
                      avatar_murid: anicantik.jpg
                    - sesi_id: 3
                      nama_murid: Samsul
                      pelajaran: Bahasa Korea
                      tanggal: 12-02-2023
                      avatar_murid: samsulronaldo.jpg
                  message: sukses menampilkan menampilkan semua sesi guru
        '400':
          $ref: '#/components/responses/Response400'
        '500':
          $ref: '#/components/responses/Response500'
  /guru/{guru_id}:
    get:
      tags:
        - Guru
      summary: untuk menampilkan detail profil guru
      description: untuk menampilkan detail profil guru
      security:
        - jwt_auth : []
      parameters:
            - name: guru_id
              in: path
              required: true
              schema:
                  type: integer
      responses:
        '200':
          description: sukses menampilkan detail profil guru
          content:
            application/json:
              schema:
                type: object
                properties:
                  data:
                    type: object
                    properties:
                      user:
                        type: object
                        properties:
                          guru_id:
                            type: integer
                            example: 1
                          nama:
                            type: string
                            example: Budi
                          email:
                            type: string
                            example: budi@yahoo.com
                          alamat:
                            type: string
                            example: "Jl. ku tak panjang"
                          telefon:
                            type: string
                            example: 081332494705
                          deskripsi:
                            type: string
                            example: hey, its me your future teacher.
                          ijazah:
                            type: string
                            example: bachelordegree.jpg
                          pelajaran:
                            type: string
                            example: Matematika, Bahasa Inggris
                          avatar:
                            type: string 
                            example : avatar1.jpg    
                  message:
                    type: string
                    example: sukses menampilkan detail profil guru
        '400':
          $ref: '#/components/responses/Response400'
        '500':
          $ref: '#/components/responses/Response500'
    
  /siswa:
    post:
      tags:
        - Siswa
      summary: daftar akun siswa
      description: digunakan untuk mendaftar akun siswa baru
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                nama:
                  type: string
                  example: John Doe
                email:
                  type: string
                  example: johndoe@gmail.com
                password:
                  type: string
                  example: qwert54321
      responses:
        '201':
          description: berhasil daftar akun
          content:
            application/json:
              schema:
                type: object
                properties:
                  data:
                    type: object
                    properties:
                      id:
                        type: integer
                        example: 1
                      nama:
                        type: string
                        example: John Doe
                      email:
                        type: string
                        example: johndoe@gmail.com
                      
                  message:
                    type: string
                    example: berhasil daftar akun baru
        '400':
          $ref: '#/components/responses/Response400'
        '500':
          $ref: '#/components/responses/Response500'
    
    get:
      tags:
        - Siswa
      summary: profil siswa
      description: digunakan untuk menampilkan profil siswa
      responses:
        '200':
          description: berhasil menampilkan profil siswa
          content:
            application/json:
              schema:
                type: object
                properties:
                  data:
                    type: object
                    properties:
                          id:
                            type: integer
                            example: 1
                          nama:
                            type: string
                            example: John Doe
                          email:
                            type: string
                            example: johndoe@gmail.com
                          alamat:
                            type: string
                            example: Surabaya, Jawa Timur
                          telepon:
                            type: string
                            example: "08123456789"
                          avatar:
                            type: string 
                            example : https://capstonegurumu.s3.ap-southeast-1.amazonaws.com/files/students/tina123@gmail.com/avatar.jpeg
                        
                  message:
                    type: string
                    example: berhasil menampilkan profil siswa
        '400':
          $ref: '#/components/responses/Response400'
        '500':
          $ref: '#/components/responses/Response500'
    put:
      tags:
        - Siswa
      summary: edit profil siswa
      description: digunakan untuk mengedit profil siswa
      security:
        - jwt_auth: []
      
      requestBody:
        content:
          multipart/form-data:
            schema:
              type: object
              properties:
                  nama:
                    type: string
                    example: John Doe
                  email:
                    type: string
                    example: johndoe@gmail.com
                  alamat:
                    type: string
                    example: Surabaya, Jawa Timur
                  telepon:
                    type: string
                    example: "08123456789"
                  avatar:
                    type: string
                    example : avatar.jpeg

      responses:
        '200':
          description: berhasil edit data siswa
          content:
            application/json:
              schema:
                type: object
                properties:
                  data:
                    type: object
                    properties:
                          id:
                            type: integer
                            example: 1
                          nama:
                            type: string
                            example: John Doe
                          email:
                            type: string
                            example: johndoe@gmail.com
                          alamat:
                            type: string
                            example: Surabaya, Jawa Timur
                          telepon:
                            type: string
                            example: 08123456789
                          avatar:
                            type: string 
                            example : https://capstonegurumu.s3.ap-southeast-1.amazonaws.com/files/students/tina123@gmail.com/avatar.jpeg
                  message:
                    type: string
                    example: berhasil mengedit data siswa
        '400':
          $ref: '#/components/responses/Response400'
        '500':
          $ref: '#/components/responses/Response500'
    delete:
      tags:
        - Siswa
      summary: hapus akun siswa
      security:
        - jwt_auth: []
      
      responses:
        '200':
          description: berhasil hapus akun
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: berhasil hapus akun
        '400':
          $ref: '#/components/responses/Response400'
        '500':
          $ref: '#/components/responses/Response500'
  /siswa/sesiku:
    get:
      tags:
        - Siswa
      summary: menampilkan semua riwayat sesi siswa
      description: menampilkan semua riwayat sesi siswa
      responses:
        '200':
          description: berhasil menampilkan riwayat sesi siswa
          content:
            application/json:
              schema:
                type: object
                properties:
                  data:
                    type: array
                    items:
                      type: object
                  message:
                    type: string
              example:
                data:
                  -
                    id: 1
                    nama_guru: Einstein
                    pelajaran: Fisika
                    tanggal: 12-01-2023
                    status: Selesai
                  -
                    id: 2
                    nama_guru: Socrates
                    pelajaran: Filsafat
                    tanggal: 14-01-2023
                    status: Sedang berjalan
                message:
                    example: berhasil menampilkan riwayat sesi siswa
        '400':
          $ref: '#/components/responses/Response400'
        '500':
          $ref: '#/components/responses/Response500'       
        
  /reservasi:
    post:
      tags:
      - "Reservasi"
      description: untuk reservasi guru
      summary: reservasi guru
      requestBody: 
        content:
          application/json:
            schema:
              type: object
              properties:
                guru_id:
                  type: integer
                nama_guru:
                  type: string
                tarif:
                  type: number
                pesan:
                  type: string
                metode_belajar:
                  type: string
                tanggal:
                  type: string
                alamat:
                  type: string
                telepon:
                  type: string
      responses:
        '201':
          description: sukses reservasi guru
          content:
            application/json:
              schema:
                type: object
                properties:
                  data:
                    type: object
                  message:
                    type: string
              example:
                data:
                  guru_id: 1
                  nama_guru: albert
                  tarif: 50000
                  pesan: Halo, Saya ingin belajar matematika
                  metode_belajar: offline
                  tanggal: "12-02-2023"
                  alamat: Jl. Merdeka 17, Jakarta
                  telepon: "081245674452"
                message: sukses reservasi sesi dengan guru
        '400':
          $ref: '#/components/responses/Response400'
        '500':
          $ref: '#/components/responses/Response500'    
  /pembayaran/{reservasi_id}:
    post:
      tags:
        - "Pembayaran"
      description: proses pembayaran
      summary: menambahkan pembayaran
      parameters:
        - name: reservasi_id
          in: path
          required: true
          schema:
            type: integer
      security:
        - jwt_auth: []
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                metode_pembayaran:
                  type: string
                  enum:
                    - transfer_va_bca
                    - transfer_va_bri
                    - transfer_va_bni
                    - transfer_va_permata
                    - qris
            example:
              data:
                metode_pembayaran: transfer_va_bca
      responses:
        '201':  
          description: sukses menambahkan pembayaran
          content:
            application/json:
              schema:
                type: object
                properties:
                  data:
                    type: object
                    properties:
                      pembayaran_id:
                        type: integer
                      tanggal:
                        type: string
                      total_tarif: 
                        type: integer
                      metode_pembayaran:
                        type: string
                      kode_transaksi:
                        type: string
                      nomer_va:
                        type: string
                      bank_penerima:
                        type: string
                      kode_qris:
                        type: string
                      status:
                        type: string
                  message:
                    type: string
              example: 
                data:
                  pembayaran_id: 1
                  tanggal: "01-02-2023"
                  total_tarif: 50000
                  metode_pembayaran: transfer_va_bca
                  kode_transaksi: "1234567"
                  nomer_va: "9897642345677"
                  bank_penerima: "bca"
                  kode_qris: "-"
                  status: "pending"
                message: sukses menambahkan pembayaran
                    
        '400':
          $ref: '#/components/responses/Response400'
        '500':
          $ref: '#/components/responses/Response500'    
          
  /ulasan/{guru_id}:
    post:
      tags:
      - Ulasan
      summary: untuk memberikan ulasan dan penilaian
      description: untuk memberikan ulasan dan penilaian
      security:
        - jwt_auth: []
      parameters:
        - name: guru_id
          in: path
          required: true
          schema:
            type: integer
      requestBody:
          content:
              application/json:
                  schema:
                      type: object
                      properties:
                          rating:
                              type: integer
                          ulasan:
                              type: string
                  example:
                      rating: 4
                      ulasan: bagus gurunya
      responses:
        '201':  
          description: sukses memberikan ulasan dan penilaian
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: sukses memberikan ulasan dan penilaian
                    
        '400':
          $ref: '#/components/responses/Response400'
        '500':
          $ref: '#/components/responses/Response500' 
    get:
      tags:
      - Ulasan
      summary: untuk mendapatkan ulasan dan penilaian
      description: untuk mendapatkan ulasan dan penilaian
      parameters:
        - name: guru_id
          in: path
          required: true
          schema:
            type: integer
      responses:
        '201':  
          description: sukses mendapatkan ulasan dan penilaian
          content:
            application/json:
              schema:
                type: object
                properties:
                    data:
                      type: array
                      items:
                        type: object
                        properties:  
                          ulasan_id:
                            type: integer
                          nama_siswa:
                            type: string
                          rating:
                            type: integer
                          ulasan:
                            type: string
                example:
                    data:
                    - review_id: 1
                      student_name: Tomas
                      rating: 4
                      ulasan: bagus gurunya
                    - review_id: 3
                      student_name: Herdi
                      rating: 5
                      ulasan: lydia okelah
                    - review_id: 5
                      student_name: Samsul
                      rating: 4
                      ulasan: menjelaskan dengan lancar dan enak
        '400':
          $ref: '#/components/responses/Response400'
        '500':
          $ref: '#/components/responses/Response500'    
components:
  securitySchemes:
    jwt_auth:
      type: http
      scheme: bearer
      bearerFormat: JWT
      description: "used JWT token for Auth"
  responses:
    Response400:
      description: bad request
      content:
        application/json:
          schema:
            type: object
            properties:
              message:
                type: string
                example: Bad Request
    Response500:
      description: server error
      content:
        application/json:
          schema:
            type: object
            properties:
              message:
                type: string
                example: server error